<!DOCTYPE html>
<!--********************************************-->
<!--*       Generated from PreTeXt source      *-->
<!--*                                          *-->
<!--*         https://pretextbook.org          *-->
<!--*                                          *-->
<!--********************************************-->
<html lang="en-US">
<head xmlns:og="http://ogp.me/ns#" xmlns:book="https://ogp.me/ns/book#">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Divisors on tropical curves</title>
<meta name="Keywords" content="Authored in PreTeXt">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta property="og:type" content="book">
<meta property="book:title" content="Methods and Examples in Combinatorics and Algebra">
<meta property="book:author" content="Sera Gunn">
<script src="https://sagecell.sagemath.org/static/embedded_sagecell.js"></script><script>var runestoneMathReady = new Promise((resolve) => window.rsMathReady = resolve);
window.MathJax = {
  tex: {
    inlineMath: [['\\(','\\)']],
    tags: "none",
    tagSide: "right",
    tagIndent: ".8em",
    packages: {'[+]': ['base', 'extpfeil', 'ams', 'amscd', 'newcommand', 'knowl']}
  },
  options: {
    ignoreHtmlClass: "tex2jax_ignore|ignore-math",
    processHtmlClass: "process-math",
    renderActions: {
        findScript: [10, function (doc) {
            document.querySelectorAll('script[type^="math/tex"]').forEach(function(node) {
                var display = !!node.type.match(/; *mode=display/);
                var math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
                var text = document.createTextNode('');
                node.parentNode.replaceChild(text, node);
                math.start = {node: text, delim: '', n: 0};
                math.end = {node: text, delim: '', n: 0};
                doc.math.push(math);
            });
        }, '']
    },
  },
  chtml: {
    scale: 0.88,
    mtextInheritFont: true
  },
  loader: {
    load: ['input/asciimath', '[tex]/extpfeil', '[tex]/amscd', '[tex]/newcommand', '[pretext]/mathjaxknowl3.js'],
    paths: {pretext: "https://pretextbook.org/js/lib"},
  },
  startup: {
    pageReady() {
      return MathJax.startup.defaultPageReady().then(function () {
      console.log("in ready function");
      rsMathReady();
      }
    )}
},
};
</script><script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script><script src="https://pretextbook.org/js/lib/jquery.min.js"></script><script src="https://pretextbook.org/js/lib/jquery.sticky.js"></script><script src="https://pretextbook.org/js/lib/jquery.espy.min.js"></script><script src="https://pretextbook.org/js/0.13/pretext.js"></script><script>miniversion=0.674</script><script src="https://pretextbook.org/js/0.13/pretext_add_on.js?x=1"></script><script src="https://pretextbook.org/js/lib/knowl.js"></script><!--knowl.js code controls Sage Cells within knowls--><script>sagecellEvalName='Evaluate (Sage)';
</script><link href="https://fonts.googleapis.com/css?family=Open+Sans:400,400italic,600,600italic" rel="stylesheet" type="text/css">
<link href="https://fonts.googleapis.com/css?family=Inconsolata:400,700&amp;subset=latin,latin-ext" rel="stylesheet" type="text/css">
<link href="https://pretextbook.org/css/0.4/pretext.css" rel="stylesheet" type="text/css">
<link href="https://pretextbook.org/css/0.4/pretext_add_on.css" rel="stylesheet" type="text/css">
<link href="https://pretextbook.org/css/0.4/banner_default.css" rel="stylesheet" type="text/css">
<link href="https://pretextbook.org/css/0.4/toc_default.css" rel="stylesheet" type="text/css">
<link href="https://pretextbook.org/css/0.4/knowls_default.css" rel="stylesheet" type="text/css">
<link href="https://pretextbook.org/css/0.4/style_default.css" rel="stylesheet" type="text/css">
<link href="https://pretextbook.org/css/0.4/colors_blue_green.css" rel="stylesheet" type="text/css">
<link href="https://pretextbook.org/css/0.4/setcolors.css" rel="stylesheet" type="text/css">
</head>
<body class="pretext-book ignore-math has-toc has-sidebar-left">
<a class="assistive" href="#content">Skip to main content</a><div id="latex-macros" class="hidden-content process-math" style="display:none"><span class="process-math">\(\newcommand{\A}{\mathbf A}
\newcommand{\C}{\mathbf C}
\newcommand{\N}{\mathbf N}
\renewcommand{\P}{\mathbf P}
\newcommand{\Q}{\mathbf Q}
\newcommand{\R}{\mathbf R}
\newcommand{\Z}{\mathbf Z}

\renewcommand{\O}{\mathcal O}
\renewcommand{\L}{\mathscr L}
\newcommand{\X}{\mathfrak X}

\DeclareMathOperator{\CDiv}{CDiv}
\DeclareMathOperator{\col}{col}
\DeclareMathOperator{\Div}{Div}
\DeclareMathOperator{\divisor}{div}
\DeclareMathOperator{\Jac}{Jac}
\DeclareMathOperator{\ord}{ord}
\DeclareMathOperator{\Pic}{Pic}
\DeclareMathOperator{\Prin}{Prin}
\DeclareMathOperator{\Proj}{Proj}
\DeclareMathOperator{\row}{row}
\DeclareMathOperator{\rref}{rref}
\DeclareMathOperator{\Spec}{Spec}
\DeclareMathOperator{\spn}{span}
\DeclareMathOperator{\val}{val}
\newcommand{\lt}{&lt;}
\newcommand{\gt}{&gt;}
\newcommand{\amp}{&amp;}
\definecolor{fillinmathshade}{gray}{0.9}
\newcommand{\fillinmath}[1]{\mathchoice{\colorbox{fillinmathshade}{$\displaystyle     \phantom{\,#1\,}$}}{\colorbox{fillinmathshade}{$\textstyle        \phantom{\,#1\,}$}}{\colorbox{fillinmathshade}{$\scriptstyle      \phantom{\,#1\,}$}}{\colorbox{fillinmathshade}{$\scriptscriptstyle\phantom{\,#1\,}$}}}
\)</span></div>
<header id="masthead" class="smallbuttons"><div class="banner"><div class="container">
<a id="logo-link" href=""></a><div class="title-container">
<h1 class="heading"><a href="methods-and-examples-in-combalg.html"><span class="title">Methods and Examples in Combinatorics and Algebra</span></a></h1>
<p class="byline">Sera Gunn</p>
</div>
</div></div>
<nav id="primary-navbar" class="navbar"><div class="container">
<div class="navbar-top-buttons">
<button class="sidebar-left-toggle-button button active" aria-label="Show or hide table of contents sidebar">Contents</button><div class="tree-nav toolbar toolbar-divisor-3"><span class="threebuttons"><a id="previousbutton" class="previous-button toolbar-item button" href="sec-algebraic.html" title="Previous">Prev</a><a id="upbutton" class="up-button button toolbar-item" href="ch-tropical.html" title="Up">Up</a><a id="nextbutton" class="next-button button toolbar-item" href="ch-misc.html" title="Next">Next</a></span></div>
</div>
<div class="navbar-bottom-buttons toolbar toolbar-divisor-4">
<button class="sidebar-left-toggle-button button toolbar-item active">Contents</button><a class="previous-button toolbar-item button" href="sec-algebraic.html" title="Previous">Prev</a><a class="up-button button toolbar-item" href="ch-tropical.html" title="Up">Up</a><a class="next-button button toolbar-item" href="ch-misc.html" title="Next">Next</a>
</div>
</div></nav></header><div class="page">
<div id="sidebar-left" class="sidebar" role="navigation"><div class="sidebar-content">
<nav id="toc"><ul>
<li class="link frontmatter">
<a href="frontmatter.html" data-scroll="frontmatter" class="internal"><span class="title">Front Matter</span></a><ul>
<li><a href="colophon-1.html" data-scroll="colophon-1" class="internal">Colophon</a></li>
<li><a href="preface.html" data-scroll="preface" class="internal">Preface</a></li>
<li><a href="acknowledgement.html" data-scroll="acknowledgement" class="internal">Acknowledgements</a></li>
</ul>
</li>
<li class="link">
<a href="ch-algebra.html" data-scroll="ch-algebra" class="internal"><span class="codenumber">1</span> <span class="title">Algebra</span></a><ul>
<li><a href="sec-extended-rref.html" data-scroll="sec-extended-rref" class="internal">The extended echelon form of a matrix</a></li>
<li><a href="sec-LA-practice-problems.html" data-scroll="sec-LA-practice-problems" class="internal">Linear Algebra Problem Generator</a></li>
</ul>
</li>
<li class="link">
<a href="ch-combinatorics.html" data-scroll="ch-combinatorics" class="internal"><span class="codenumber">2</span> <span class="title">Combinatorics</span></a><ul><li><a href="sec-matrix-products.html" data-scroll="sec-matrix-products" class="internal">Matrix products and walks in graphs</a></li></ul>
</li>
<li class="link">
<a href="ch-tropical.html" data-scroll="ch-tropical" class="internal"><span class="codenumber">3</span> <span class="title">Tropical Geometry</span></a><ul>
<li><a href="sec-algebraic.html" data-scroll="sec-algebraic" class="internal">Divisors on algebraic curves</a></li>
<li><a href="sec-tropical.html" data-scroll="sec-tropical" class="active">Divisors on tropical curves</a></li>
</ul>
</li>
<li class="link">
<a href="ch-misc.html" data-scroll="ch-misc" class="internal"><span class="codenumber">4</span> <span class="title">Miscellaneous</span></a><ul><li><a href="sec-ab.html" data-scroll="sec-ab" class="internal">Writing proofs of <span class="process-math">\(A = B\)</span></a></li></ul>
</li>
</ul></nav><div class="extras"><nav><a class="pretext-link" href="https://pretextbook.org">Authored in PreTeXt</a><a href="https://www.mathjax.org"><img title="Powered by MathJax" src="https://www.mathjax.org/badge/badge.gif" alt="Powered by MathJax"></a></nav></div>
</div></div>
<main class="main"><div id="content" class="pretext-content"><section class="section" id="sec-tropical"><h2 class="heading hide-type">
<span class="type">Section</span> <span class="codenumber">3.2</span> <span class="title">Divisors on tropical curves</span>
</h2>
<section class="subsection" id="ss-tropical-curves"><h3 class="heading hide-type">
<span class="type">Subsection</span> <span class="codenumber">3.2.1</span> <span class="title">Definitions and examples</span>
</h3>
<article class="definition definition-like" id="definition-8"><h4 class="heading">
<span class="type">Definition</span><span class="space"> </span><span class="codenumber">3.2.1</span><span class="period">.</span>
</h4>
<p id="p-91">A <em class="emphasis">metric graph</em> <span class="process-math">\(\Gamma\)</span> is a graph in the combinatorial sense (multiple edges and loops are allowed) but modelled as a metric space by giving each edge <span class="process-math">\(e\)</span> a positive length <span class="process-math">\(\ell(e) \in (0, \infty]\text{,}\)</span> possibly restricted to some subgroup like <span class="process-math">\(\Q\)</span> or <span class="process-math">\(\Z\text{.}\)</span> In this way, we make each edge isometric to the interval <span class="process-math">\([0,\ell(e)]\text{.}\)</span></p>
<p id="p-92">Sometimes, we will ask that the only vertices we consider are the ones that are required topologically. I.e. the ones of degree different from 2 since two edges meeting at a single vertex can just be joined up and their lengths added. Vertices of degree 2 will come and go as needed. The last requirement is that only leaf edges are allowed to be infinite and conversely, every leaf edge is required to be infinite.</p>
<p id="p-93">We call the underlying combinatorial graph <span class="process-math">\(|\Gamma|\text{.}\)</span></p></article><figure class="figure figure-like" id="fig-metric-graph"><div class="image-box" style="width: 100%; margin-left: 0%; margin-right: 0%;"><img src="generated/latex-image/tikz-metric-graph.svg" role="img" class="contained" alt="Metric graph consisting of two circles joined by a bridging edge"></div>
<figcaption><span class="type">Figure</span><span class="space"> </span><span class="codenumber">3.2.2<span class="period">.</span></span><span class="space"> </span>Example of a metric graph (not drawn to any scale)</figcaption></figure><p id="p-94">Mirroring <a href="" class="xref" data-knowl="./knowl/def-weil-divisor.html" title="Definition 3.1.1">Definition 3.1.1</a> the from the previous section, we define divisors and a divisor group.</p>
<article class="definition definition-like" id="definition-9"><h4 class="heading">
<span class="type">Definition</span><span class="space"> </span><span class="codenumber">3.2.3</span><span class="period">.</span>
</h4>
<p id="p-95">A <em class="emphasis">divisor</em> on <span class="process-math">\(\Gamma\)</span> is a finitely-supported formal sum</p>
<div class="displaymath process-math" data-contains-math-knowls="">
\begin{equation*}
D = \sum_{p \in \Gamma} a_p \cdot p
\end{equation*}
</div>
<p class="continuation">with <span class="process-math">\(a_p \in \Z\)</span> and <span class="process-math">\(p\)</span> from anywhere in <span class="process-math">\(\Gamma\text{,}\)</span> not just the topological vertices.</p>
<p id="p-96">The set of all divisors is the group <span class="process-math">\(\Div(\Gamma)\)</span> and the degree map is <span class="process-math">\(\deg(\sum a_p \cdot p) = \sum a_p\text{.}\)</span></p></article><p id="p-97">Like with algebraic curves, we also have a notion of principal divisors. These are given as the divisors of piecewise-linear functions. Really these are piecewise affine-functions, but like with algebraic curves, the "scalar multiple" doesn't matter so everyone just calls them "linear."</p>
<p id="p-98">In the next section, we will see why these are a natural choice and how they relate to rational functions on algebraic curves.</p>
<article class="definition definition-like" id="definition-10"><h4 class="heading">
<span class="type">Definition</span><span class="space"> </span><span class="codenumber">3.2.4</span><span class="period">.</span>
</h4>
<p id="p-99">A function <span class="process-math">\(f : \Gamma \to \R\)</span> is <em class="emphasis">piecewise linear</em>, if on each edge it is a continuous function that can be broken up into a finite set of linear functions. By abuse of terminology, we will also call these <em class="emphasis">rational functions</em>.</p>
<p id="p-100">The divisor of such an <span class="process-math">\(f\)</span> is supported at the points <span class="process-math">\(p\)</span> at which <span class="process-math">\(f\)</span> is non-differentiable (including the topological vertices of <span class="process-math">\(\Gamma\)</span>). We define <span class="process-math">\(\ord_p(f)\)</span> to be the sum of the incoming slopes of <span class="process-math">\(f\)</span> at <span class="process-math">\(p\)</span> and define</p>
<div class="displaymath process-math" data-contains-math-knowls="">
\begin{equation*}
\divisor(f) = \sum_{p \in \Gamma} \ord_p(f) \cdot p.
\end{equation*}
</div>
<p id="p-101">As in the previous section, we define <span class="process-math">\(\Prin(\Gamma)\)</span> as the set of all principal divisors and define <span class="process-math">\(\Jac(\Gamma) = \Div(\Gamma) / \Prin(\Gamma)\)</span> and <span class="process-math">\(\Jac^0(\Gamma) = \Div^0(\Gamma)/\Prin(\Gamma)\text{.}\)</span> Like before, if <span class="process-math">\(\Gamma\)</span> is compact, then every principal divisor has degree <span class="process-math">\(0\text{.}\)</span></p></article><article class="example example-like" id="example-14"><h4 class="heading">
<span class="type">Example</span><span class="space"> </span><span class="codenumber">3.2.5</span><span class="period">.</span>
</h4>
<p id="p-102">If <span class="process-math">\(|\Gamma|\)</span> is at tree, then any divisor on <span class="process-math">\(\Gamma\)</span> is principal. Trees are the tropical analogue of <span class="process-math">\(\A^1\text{.}\)</span></p></article><article class="example example-like" id="example-15"><h4 class="heading">
<span class="type">Example</span><span class="space"> </span><span class="codenumber">3.2.6</span><span class="period">.</span>
</h4>
<p id="p-103">If <span class="process-math">\(\Gamma\)</span> is a circle, then the rational functions on <span class="process-math">\(\Gamma\)</span> look something like the following (absolute value of slopes indicated above)</p>
<div class="image-box" style="width: 100%; margin-left: 0%; margin-right: 0%;"><img src="generated/latex-image/tikz-rational-function-on-circle.svg" role="img" class="contained" alt="Piecewise-linear function on a circle"></div>
<p id="p-104">On a circle, the endpoints necessarily have the same <span class="process-math">\(y\)</span>-coordinate. The divisor associated to this piecewise-linear function is</p>
<div class="displaymath process-math" data-contains-math-knowls="">
\begin{equation*}
(- \tfrac12 + 0)a + (0 - 2)b + (2 + 1)c + (-1 + 0)d + (0 + \tfrac12)e
\end{equation*}
</div></article><article class="remark remark-like" id="remark-8"><h4 class="heading">
<span class="type">Remark</span><span class="space"> </span><span class="codenumber">3.2.7</span><span class="period">.</span><span class="space"> </span><span class="title">Divisors on <span class="process-math">\(G = |\Gamma|\)</span>.</span>
</h4>
<p id="p-105">We also consider the simpler model of a multigraph (with no metric). Here the divisors are supported only on the vertices of <span class="process-math">\(G\)</span> and the principal divisors are the image of the Laplacian operator <span class="process-math">\(\Delta : V(G) \to \Div(G)\)</span> given by</p>
<div class="displaymath process-math" data-contains-math-knowls="">
\begin{equation*}
\Delta(v) = \sum_{w \sim v} (w - v) = \sum_{w \sim v} w - \val(v)
\end{equation*}
</div>
<p id="p-106">(val = valence since we already have defined a "degree"). It's not too important whether one takes <span class="process-math">\(\Delta\)</span> or <span class="process-math">\(-\Delta\text{.}\)</span> This definition agrees with the intersection theory we do in the next section.</p></article><p id="p-107">Let's finish this section by elaboration on the difference between a <em class="emphasis">metric graph</em> and a <em class="emphasis">tropical curve</em>.</p>
<article class="definition definition-like" id="def-tropical-curve"><h4 class="heading">
<span class="type">Definition</span><span class="space"> </span><span class="codenumber">3.2.8</span><span class="period">.</span>
</h4>
<p id="p-108">An <em class="emphasis">abstract tropical curve</em> or simply "tropical curve" is a metric graph <span class="process-math">\(\Gamma\)</span> with non-negative weights at the vertices of <span class="process-math">\(|\Gamma|\text{.}\)</span> Here we will also allow some vertices of degree 2 but require these to have a positive weight.</p></article></section><section class="subsection" id="ss-classical-to-tropical-divisors"><h3 class="heading hide-type">
<span class="type">Subsection</span> <span class="codenumber">3.2.2</span> <span class="title">From algebraic curves to tropical curves</span>
</h3>
<p id="p-109">Let us begin by explaining where tropical curves come from in the first place. We will need the following notation going forward.</p>
<dl class="description-list">
<dt id="li-5"><span class="process-math">\((K, v)\)</span></dt>
<dd><p id="p-110">A field <span class="process-math">\(K\)</span> with a non-trivial discrete valuation <span class="process-math">\(v : R \to \Z\)</span></p></dd>
<dt id="li-6"><span class="process-math">\((\O_K, \mathfrak m_K)\)</span></dt>
<dd><p id="p-111">The ring of integers and maximal ideal of <span class="process-math">\(K\)</span></p></dd>
<dt id="li-7"><span class="process-math">\(k\)</span></dt>
<dd><p id="p-112">The residue field <span class="process-math">\(k = \O_K/\mathfrak m_K\)</span> of <span class="process-math">\(K\)</span></p></dd>
<dt id="li-8"><span class="process-math">\(\X\)</span></dt>
<dd><p id="p-113">A curve over <span class="process-math">\(\O_K\)</span> (relative dimension 1 scheme)</p></dd>
<dt id="li-9"><span class="process-math">\(X\)</span></dt>
<dd><p id="p-114">The general fibre <span class="process-math">\(\mathfrak X_0\)</span>—a curve over <span class="process-math">\(K\)</span></p></dd>
<dt id="li-10"><span class="process-math">\(\X_k\)</span></dt>
<dd><p id="p-115">The special fibre—a curve over <span class="process-math">\(k\)</span></p></dd>
</dl>
<p id="p-116">So here's the idea: we have some equation with coefficients in <span class="process-math">\(\O_K\)</span> and that gives us two curves—taking that equation mod <span class="process-math">\(\mathfrak m_K\)</span> and viewing that equation in <span class="process-math">\(K\text{.}\)</span> This gives us a degeneration of the curve <span class="process-math">\(X\)</span> to the curve <span class="process-math">\(\X_k\)</span></p>
<article class="example example-like" id="example-16"><h4 class="heading">
<span class="type">Example</span><span class="space"> </span><span class="codenumber">3.2.9</span><span class="period">.</span><span class="space"> </span><span class="title">An elliptic curve degenerating into a collection of rational curves.</span>
</h4>
<p id="p-117">Consider the integer equation</p>
<div class="displaymath process-math" data-contains-math-knowls="">
\begin{equation*}
y^2 = x(x - 7)(x + 1).
\end{equation*}
</div>
<p id="p-118">This defines a smooth elliptic curve in <span class="process-math">\(\C\)</span> and if we consider this mod 7, we get a nodal cubic <span class="process-math">\(y^2 = x^2(x + 1)\text{.}\)</span> See <a href="" class="xref" data-knowl="./knowl/fig-elliptic-degeneration.html" title="Figure 3.2.10">Figure 3.2.10</a> for a picture</p></article><figure class="figure figure-like" id="fig-elliptic-degeneration"><div class="sidebyside"><div class="sbsrow" style="margin-left:2.5%;margin-right:2.5%;">
<div class="sbspanel middle" style="width:47.3684210526316%;"><img src="generated/sageplot/sageplot-elliptic-curve.svg" role="img" class="contained" alt="The curve y^2 = x(x - 7)(x + 1)"></div>
<div class="sbspanel middle" style="width:47.3684210526316%;"><img src="generated/sageplot/sageplot-degenerate-elliptic-curve.svg" role="img" class="contained" alt="The curve y^2 = x^2(x + 1)"></div>
</div></div>
<figcaption><span class="type">Figure</span><span class="space"> </span><span class="codenumber">3.2.10<span class="period">.</span></span><span class="space"> </span>An elliptic curve degenerating to a nodal cubic</figcaption></figure><p id="p-119">We now explain how to generate a metric graph out of this. To that end, we would like for <span class="process-math">\(\X_k\)</span> to have several singularities but only nodal singularities.</p>
<p id="p-120">Let <span class="process-math">\(V_1, \dots, V_k\)</span> be the irreducible components of <span class="process-math">\(\X_k\text{.}\)</span> Define a graph <span class="process-math">\(G\)</span> with vertex set <span class="process-math">\(v_1, \dots, v_k\)</span> and connect <span class="process-math">\(v_i\)</span> to <span class="process-math">\(v_j\)</span> if <span class="process-math">\(V_i\)</span> and <span class="process-math">\(V_j\)</span> intersect. We allow self-intersections and multiple intersections so <span class="process-math">\(G\)</span> is a multi-graph.</p>
<p id="p-121">This gets us the underlying graph. To get the metric, we define the length of an edge <span class="process-math">\(v_i v_j\)</span> to be <span class="process-math">\(n\)</span> if at that point of intersection, the variety is described locally by <span class="process-math">\(xy = f\)</span> where <span class="process-math">\(f \in K\)</span> has valuation <span class="process-math">\(n\text{.}\)</span> This could be non-integral.</p>
<p id="p-122">In the example above, the metric graph would be a circle of length 1 since locally the equation is <span class="process-math">\(xy = 7^1\text{.}\)</span></p>
<p id="p-123">The weight of a vertex <span class="process-math">\(v_i\)</span> is the genus of <span class="process-math">\(v_i\text{.}\)</span> We will not do much with these weights in this discussion other than to observe that they dictate what sort of intersections we allow if we compare with <a href="" class="xref" data-knowl="./knowl/def-tropical-curve.html" title="Definition 3.2.8">Definition 3.2.8</a>.</p>
<article class="definition definition-like" id="definition-12"><h4 class="heading">
<span class="type">Definition</span><span class="space"> </span><span class="codenumber">3.2.11</span><span class="period">.</span>
</h4>
<p id="p-124">We call this metric curve defined above the <em class="emphasis">dual graph</em> of <span class="process-math">\(\X_k\text{.}\)</span></p>
<p id="p-125">A curve <span class="process-math">\(\X\)</span> with the given notation is said to be a <em class="emphasis">semistable model</em> for <span class="process-math">\(X\)</span> if if the dual graph of <span class="process-math">\(\X_k\)</span> is a tropical curve (so an example requirement is that there are only nodal intersections).</p></article><article class="definition definition-like" id="definition-13"><h4 class="heading">
<span class="type">Definition</span><span class="space"> </span><span class="codenumber">3.2.12</span><span class="period">.</span>
</h4>
<p id="p-126">Given a point of <span class="process-math">\(X\)</span> we can consider its Zariski closure in <span class="process-math">\(\X\)</span> and extending this process linearly, we have a way of taking a divisor on <span class="process-math">\(X\)</span> and getting a divisor on <span class="process-math">\(\X\text{.}\)</span></p>
<p id="p-127">If <span class="process-math">\(V_1, \dots, V_k\)</span> are the components of <span class="process-math">\(\X_k\)</span> as before, then we have an intersection pairing taking a divisor <span class="process-math">\(\mathscr D\)</span> on <span class="process-math">\(\X\)</span> to</p>
<div class="displaymath process-math" data-contains-math-knowls="">
\begin{equation*}
\mathscr D \cdot V_i = \deg(\L(\mathscr D)|_{V_i}).
\end{equation*}
</div>
<p id="p-128">Putting this altogether we get a homomorphism <span class="process-math">\(\rho : \Div(X) \to \Div(G)\)</span> where</p>
<div class="displaymath process-math" data-contains-math-knowls="">
\begin{equation*}
\rho(D) = \sum_{i = 1}^k (\mathscr D \cdot V_i) v_i.
\end{equation*}
</div></article><p id="p-129">Another way to describe this map is to take a point <span class="process-math">\(P \in X(K) = \X(\O_K)\)</span> and then reduce mod <span class="process-math">\(\mathfrak m_K\)</span> to get a point <span class="process-math">\(p \in \X_k\text{.}\)</span> That point <span class="process-math">\(p\)</span> belongs to one of the components <span class="process-math">\(V_1,\dots,V_k\)</span> and that gives us a map from <span class="process-math">\(X(K)\)</span> to the vertex set of <span class="process-math">\(G\text{.}\)</span></p>
<article class="remark remark-like" id="remark-9"><h4 class="heading">
<span class="type">Remark</span><span class="space"> </span><span class="codenumber">3.2.13</span><span class="period">.</span>
</h4>
<p id="p-130">Since the map <span class="process-math">\(X(K) \to \X_k\)</span> is surjective, the map <span class="process-math">\(\rho : \Div(X) \to \Div(G)\)</span> is also surjective.</p></article><p id="p-131">Doing a bit of intersection theory, we see that for <span class="process-math">\(i \neq j\)</span></p>
<div class="displaymath process-math" data-contains-math-knowls="">
\begin{equation*}
V_i \cdot V_j = |V_i \cap V_j|
\end{equation*}
</div>
<p class="continuation">is the number of places components <span class="process-math">\(i\)</span> and <span class="process-math">\(j\)</span> intersect. Additionally, the self-intersection number is</p>
<div class="displaymath process-math" data-contains-math-knowls="">
\begin{equation*}
V_i \cdot V_i = - \val(v_i)
\end{equation*}
</div>
<p class="continuation">where valence of a vertex is the number of neighbours.</p>
<p id="p-132">The reason why this self-intersection number is what it is is because the total degree needs to be <span class="process-math">\(0\text{.}\)</span> Many self-intersection problems are computed this way. For instance, in the plane, two lines intersect in a single point. So <span class="process-math">\(\ell \cdot \ell = 1\text{.}\)</span> But now if we blow up the point of intersection, the class <span class="process-math">\(\ell\)</span> becomes <span class="process-math">\(\ell + E\)</span>—an exceptional divisor. And here we still have <span class="process-math">\((\ell + E)(\ell + E) = 1\)</span> except now <span class="process-math">\(\ell\)</span> and <span class="process-math">\(\ell\)</span> do not intersect but <span class="process-math">\(\ell \cdot E = 1\)</span> and in order to make the equation come out right, <span class="process-math">\(E \cdot E = -1\text{.}\)</span></p>
<p id="p-133">We point the reader to <a href="" class="xref" data-knowl="./knowl/L.html" title="Bibliographic Entry 3.2.4.2: Algebraic Geometry and Arithmetic Curves">[3.2.4.2]</a> (Chapter 9) for further explanation. The takeaway here is that divisors supported on <span class="process-math">\(\X_k\)</span> always map to principal divisors in <span class="process-math">\(G\text{.}\)</span></p>
<article class="remark remark-like" id="remark-10"><h4 class="heading">
<span class="type">Remark</span><span class="space"> </span><span class="codenumber">3.2.14</span><span class="period">.</span>
</h4>
<p id="p-134">Now it's not true that elements of <span class="process-math">\(\Prin(X)\)</span> remain principal in <span class="process-math">\(\X\text{.}\)</span> However, as we have seen just above, the part of <span class="process-math">\(\divisor(f)\)</span> which is supported on <span class="process-math">\(\X_k\)</span> specializes to a principal divisor on <span class="process-math">\(G\text{.}\)</span></p>
<p id="p-135">So if we start with a divisor <span class="process-math">\(\divisor(f)\)</span> on <span class="process-math">\(X\)</span> and take the closure in <span class="process-math">\(\X\text{,}\)</span> the result differs from a principal divisor on <span class="process-math">\(\X\)</span> by a divisor supported in <span class="process-math">\(\X_k\text{.}\)</span></p>
<p id="p-136">Now two facts are true: first if <span class="process-math">\(\mathscr D\)</span> is a principal divisor on <span class="process-math">\(\X\)</span> then <span class="process-math">\(\O(\mathscr D) \cong \O\)</span> so <span class="process-math">\(\rho(\mathscr D) = 0\)</span> by definition. Second, if <span class="process-math">\(D \in \Prin(X)\)</span> then <span class="process-math">\(\rho(D)\)</span> differs from <span class="process-math">\(\rho(\mathscr D) = 0\)</span> by <span class="process-math">\(\rho(\mathscr D|_{\X_k}) \in \Prin(G)\text{.}\)</span></p></article><p id="p-137">Let's summarize what we have so far.</p>
<article class="theorem theorem-like" id="theorem-5"><h4 class="heading">
<span class="type">Theorem</span><span class="space"> </span><span class="codenumber">3.2.15</span><span class="period">.</span><span class="space"> </span><span class="title">Specialization of divisors to graphs.</span>
</h4>
<p id="p-138">With the notation as before, there is a well defined map</p>
<div class="displaymath process-math" data-contains-math-knowls="">
\begin{equation*}
\rho : \Div(X) \to \Div(G)
\end{equation*}
</div>
<p class="continuation">taking principal divisors to principal divisors.</p></article><article class="remark remark-like" id="remark-11"><h4 class="heading">
<span class="type">Remark</span><span class="space"> </span><span class="codenumber">3.2.16</span><span class="period">.</span>
</h4>
<p id="p-139">There are three problems with all of this.</p>
<ol class="decimal">
<li id="li-11"><p id="p-derived-li-11">We started with metric graphs but this whole last section was about non-metric graphs</p></li>
<li id="li-12"><p id="p-derived-li-12">We have restricted ourselves to DVRs</p></li>
<li id="li-13"><p id="p-derived-li-13">This construction is not functorial with respect to base change (next example)</p></li>
</ol>
<p id="p-140">All of this is fixed by looking at Berkovich spaces.</p></article><article class="example example-like" id="example-17"><h4 class="heading">
<span class="type">Example</span><span class="space"> </span><span class="codenumber">3.2.17</span><span class="period">.</span>
</h4>
<p id="p-141">Let <span class="process-math">\(K = \C((t))\)</span> and <span class="process-math">\(\X\)</span> be the projective curve defined by <span class="process-math">\(xy = tz^2\text{.}\)</span> This is a smooth conic which degenerates to the pair of lines <span class="process-math">\(V : x = 0\)</span> and <span class="process-math">\(W : y = 0\text{.}\)</span> So the dual graph consists of a single edge <span class="process-math">\(v \sim w\text{.}\)</span></p>
<p id="p-142">Let <span class="process-math">\(D = P + Q\)</span> with</p>
<div class="displaymath process-math" data-contains-math-knowls="">
\begin{equation*}
P = (\sqrt t : \sqrt t : 1) \text{ and } Q = (-\sqrt t : - \sqrt t : 1).
\end{equation*}
</div>
<p class="continuation">Then as <span class="process-math">\(t \to \infty\text{,}\)</span> both <span class="process-math">\(P\)</span> and <span class="process-math">\(Q\)</span> converge to the node <span class="process-math">\((0:0:1)\text{.}\)</span></p>
<p id="p-143">If we look at the solutions to <span class="process-math">\(x = y\)</span> in <span class="process-math">\(\X\)</span> these are exactly <span class="process-math">\(P + Q\)</span> and we also have a couple of poles at infinity <span class="process-math">\((1:0:0) + (0:1:0)\text{.}\)</span> Or in other words,</p>
<div class="displaymath process-math" data-contains-math-knowls="">
\begin{equation*}
P + Q - (1:0:0) - (0:1:0) = \divisor(x - y)
\end{equation*}
</div>
<p class="continuation">So <span class="process-math">\(P + Q \sim (1:0:0) + (0:1:0)\)</span> and consequentially <span class="process-math">\(\rho(P + Q) = v + w\text{.}\)</span></p>
<p id="p-144">On the other hand, if we base change to <span class="process-math">\(\C((t^{\frac12}))\)</span> then we have to blow up at <span class="process-math">\(x = y = 0\)</span> to regularize and this adds a new component <span class="process-math">\(U\)</span> to <span class="process-math">\(\X'_k\)</span> sitting exactly halfway between <span class="process-math">\(v\)</span> and <span class="process-math">\(w\text{.}\)</span> Now <span class="process-math">\(\rho(P + Q) = 2u\text{,}\)</span> and while this is linearly equivalent to <span class="process-math">\(v + w\text{,}\)</span> the map <span class="process-math">\(\rho\)</span> has changed on the level of <span class="process-math">\(\Div(X)\text{.}\)</span></p>
<p id="p-145">Note that <span class="process-math">\(x - y\)</span> vanishes along this exceptional divisor and both <span class="process-math">\(P\)</span> and <span class="process-math">\(Q\)</span> degenerate to <span class="process-math">\(U\text{.}\)</span></p>
<div class="image-box" style="width: 100%; margin-left: 0%; margin-right: 0%;"><img src="generated/latex-image/tikz-base-change-not-functorial.svg" role="img" class="contained" alt="Blow-up of \(\X_k\)"></div></article></section><section class="subsection" id="ss-baker-specialization"><h3 class="heading hide-type">
<span class="type">Subsection</span> <span class="codenumber">3.2.3</span> <span class="title">The Baker Specialization Lemma</span>
</h3>
<p id="p-146">First we need a definition of <span class="process-math">\(r(D) = \dim \L(D) - 1\)</span> that can be made sense of if <span class="process-math">\(D\)</span> is a tropical divisor.</p>
<article class="definition definition-like" id="definition-14"><h4 class="heading">
<span class="type">Definition</span><span class="space"> </span><span class="codenumber">3.2.18</span><span class="period">.</span>
</h4>
<p id="p-147">If <span class="process-math">\(D\)</span> is a divisor (tropical or algebraic), then recall that <span class="process-math">\(|D| = \{E \ge 0 : E \sim D\}\text{.}\)</span> We define <span class="process-math">\(r(D) = -1\)</span> if <span class="process-math">\(|D| = \varnothing\)</span> and otherwise</p>
<div class="displaymath process-math" data-contains-math-knowls="">
\begin{equation*}
r(D) =           
\max\{k : |D - E| \ne \varnothing, \text{ for all } E \in \Div_+^k(X)\}.
\end{equation*}
</div>
<p class="continuation">(<span class="process-math">\(\Div_+^k(X) = \)</span> effective and degree <span class="process-math">\(k\text{.}\)</span>)</p>
<p id="p-148">This definition works the same if we replace <span class="process-math">\(X\)</span> by <span class="process-math">\(G\)</span> or <span class="process-math">\(\Gamma\text{.}\)</span></p></article><article class="theorem theorem-like" id="thm-rank-comparison"><h4 class="heading">
<span class="type">Theorem</span><span class="space"> </span><span class="codenumber">3.2.19</span><span class="period">.</span><span class="space"> </span><span class="title">Relation to the previous definition.</span>
</h4>
<p id="p-149">The number <span class="process-math">\(r(D)\)</span> we defined is equal to <span class="process-math">\(\dim \L(D) - 1\)</span> for algebraic curves.</p></article><article class="hiddenproof" id="proof-6"><a href="" data-knowl="" class="id-ref proof-knowl original" data-refid="hk-proof-6"><h4 class="heading"><span class="type">Proof<span class="period">.</span></span></h4></a></article><div class="hidden-content tex2jax_ignore" id="hk-proof-6"><article class="hiddenproof">Follows from <a href="" class="xref" data-knowl="./knowl/thm-dimension-property-linear-systems.html" title="Theorem 3.1.19: Dimension properties of linear systems">Theorem 3.1.19</a>. See also <a href="" class="xref" data-knowl="./knowl/B.html" title="Bibliographic Entry 3.2.4.1: Specialization of linear systems from curves to graphs">[3.2.4.1]</a> Lemma 2.4.</article></div>
<article class="theorem theorem-like" id="thm-rank-properties"><h4 class="heading">
<span class="type">Theorem</span><span class="space"> </span><span class="codenumber">3.2.20</span><span class="period">.</span>
</h4>
<p id="p-150">For every point <span class="process-math">\(P\text{,}\)</span> we have <span class="process-math">\(r(D - P) \ge r(D) - 1\)</span> and moreover there exists a point <span class="process-math">\(P\)</span> for which <span class="process-math">\(r(D - P) = r(D) - 1\text{.}\)</span></p></article><article class="hiddenproof" id="proof-7"><a href="" data-knowl="" class="id-ref proof-knowl original" data-refid="hk-proof-7"><h4 class="heading"><span class="type">Proof<span class="period">.</span></span></h4></a></article><div class="hidden-content tex2jax_ignore" id="hk-proof-7"><article class="hiddenproof"><p id="p-151">Let <span class="process-math">\(r = r(D)\text{.}\)</span> If <span class="process-math">\(r(D) \le 0\)</span> then this is evident.</p>
<p id="p-152">Now suppose <span class="process-math">\(E = P_1 + P_2 + \dots + P_r\)</span> is any rank <span class="process-math">\(k\)</span> divisor then <span class="process-math">\(|D - P_1 - \dots - P_r| \neq \varnothing\)</span> by definition. It follows that <span class="process-math">\(r(D - P_1) \ge r - 1\)</span> for any point <span class="process-math">\(P_1\)</span> since <span class="process-math">\(P_2, \dots, P_r\)</span> are arbitrary.</p>
<p id="p-153">Now suppose <span class="process-math">\(E = P_1 + \dots + P_r\)</span> is the divisor that achieves the maximum. Then <span class="process-math">\(r(D - P_1) = r - 1\)</span> since otherwise we could do better than <span class="process-math">\(E\text{.}\)</span></p></article></div>
<p id="p-154">Now finally, the main event.</p>
<article class="theorem theorem-like" id="theorem-8"><h4 class="heading">
<span class="type">Theorem</span><span class="space"> </span><span class="codenumber">3.2.21</span><span class="period">.</span><span class="space"> </span><span class="title">Baker's Specialization Lemma.</span>
</h4>
<p id="p-155">We have <span class="process-math">\(r_{G}(\rho(D)) \ge r_X(D)\)</span> for any divisor <span class="process-math">\(D\)</span> on <span class="process-math">\(X\text{.}\)</span></p></article><article class="hiddenproof" id="proof-8"><a href="" data-knowl="" class="id-ref proof-knowl original" data-refid="hk-proof-8"><h4 class="heading"><span class="type">Proof<span class="period">.</span></span></h4></a></article><div class="hidden-content tex2jax_ignore" id="hk-proof-8"><article class="hiddenproof"><p id="p-156">Let <span class="process-math">\(\bar D = \rho(D)\text{.}\)</span> We will show by induction that if <span class="process-math">\(r_X(D) \ge r\)</span> then <span class="process-math">\(r_G(\bar D) \ge r\)</span> as well. The base case, <span class="process-math">\(r = -1\)</span> is clear.</p>
<p id="p-157">Suppose next <span class="process-math">\(r = 0\)</span> and <span class="process-math">\(r_X(D) \ge 0\text{.}\)</span> Then <span class="process-math">\(|D| \neq \varnothing\)</span> so there exists an effective divisor <span class="process-math">\(E \sim D\text{.}\)</span> Since <span class="process-math">\(\rho\)</span> is a homomorphism, we have <span class="process-math">\(\bar D = \rho(D) \sim \rho(E) \ge 0\)</span> and consequentially <span class="process-math">\(r_G(\bar D) \ge 0\text{.}\)</span></p>
<p id="p-158">Now suppose <span class="process-math">\(r \ge 1\text{.}\)</span> Let <span class="process-math">\(\bar P \in V(G)\)</span> be any vertex. Since <span class="process-math">\(\rho\)</span> is surjective, we can find some <span class="process-math">\(P \in X\)</span> with <span class="process-math">\(\rho(P) = \bar P\text{.}\)</span> Now by <a href="" class="xref" data-knowl="./knowl/thm-rank-properties.html" title="Theorem 3.2.20">Theorem 3.2.20</a>, <span class="process-math">\(r_X(D - P) \ge r - 1\)</span> and by induction <span class="process-math">\(r_G(\bar D - \bar P) \ge r - 1\text{.}\)</span> Since this holds for all <span class="process-math">\(\bar P\text{,}\)</span> we conclude that <span class="process-math">\(r_G(\bar D) \ge r\text{.}\)</span></p></article></div></section><section class="references" id="references-2"><h3 class="heading hide-type">
<span class="type">References</span> <span class="codenumber">3.2.4</span> <span class="title">References</span>
</h3>
<article class="bib" id="B"><div class="bibitem">[1]</div>  <div class="bibentry">Matthew Baker. <i>Specialization of linear systems from curves to graphs</i>. Algebra Number Theory 2 (6) 613 - 653, 2008. <a class="external" href="https://doi.org/10.2140/ant.2008.2.613" target="_blank"><code class="code-inline tex2jax_ignore">https://doi.org/10.2140/ant.2008.2.613</code></a>
</div></article><article class="bib" id="L"><div class="bibitem">[2]</div>  <div class="bibentry">Qing Liu. <i>Algebraic Geometry and Arithmetic Curves</i>. Oxford Graduate Texts in Mathematics (Book 6). Oxford University Press, 2006.</div></article></section></section></div></main>
</div>
</body>
</html>
